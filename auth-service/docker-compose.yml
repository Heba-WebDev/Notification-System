services:
  auth-service:
    build:
      context: ..
      dockerfile: auth-service/Dockerfile
    container_name: notification-auth-service
    environment:
      - NODE_ENV=production
      - SYNCHRONIZE=true
      # RabbitMQ Configuration (Docker service name)
      - RABBITMQ_URL=amqp://admin:password@notification-rabbitmq:5672
      - RABBITMQ_USERNAME=admin
      - RABBITMQ_PASSWORD=password
      - RABBITMQ_HOST=notification-rabbitmq
      - RABBITMQ_PORT=5672
      # Database Configuration (Docker service names)
      # Use notification-postgres container name
      - DB_HOST=notification-postgres
      - DB_PORT=5432
      - DB_USERNAME=${DB_USERNAME:-admin}
      - DB_PASSWORD=${DB_PASSWORD:-password}
      - DB_NAME=auth_service
      # JWT Configuration
      - JWT_SECRET=${JWT_SECRET:-development-jwt-secret-change-in-production-min-32-characters}
    networks:
      - notification-network
    restart: unless-stopped
    # Note: Infrastructure services (rabbitmq, postgres) should be running separately
    # They should be on the same notification-network

networks:
  notification-network:
    external: true

